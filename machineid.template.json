{
  "vonefs_skip_newfs_prompt": true,
  "hal_num_ssds": 0,
  "hal_node_type": "Azure",
  "hal_chassis_type": 20,
  "hal_linear_journal": true,
  "hal_internal_interfaces": [
    "hn1"
  ],
  "hal_dongle_serialno": "SV200-930073-${format("%04d", node_number)}",
  "hal_jdisk_id": ${jsonencode(jdev)},
  "hal_num_journal_bays": 1,
  "hal_dram_size": 68719476736,
  "hal_dongle_sysconfig": "7331-1000-7331",
  "hal_sata_disks": true,
  "hal_nvram_type": 1,
  "hal_num_blocks_ssd": 0,
  "hal_hdd_drives": true,
  "hal_external_gige_interfaces": [
    "hn0"
  ],
  "hal_external_10gige_interfaces": [],
  "hal_num_hdds": ${num_drives},
  "hal_num_blocks_hdd": ${drive_size * (pow(1024, 2)) * (1024 / 512)},
  "hal_ssd_drives": false,
  "hal_is_vonefs": true,
  "hal_node_class": "storage",
  "hal_ssd_capacity": 0,
  "hal_sas_disks": true,
  "hal_supports_vmx": true,
  "hal_is_aws_node": false,
  "hal_is_first_node": ${node_number == 0},
  "devices": ${jsonencode([for index in range(cluster_nodes) : {
    "serial_number": "SV200-930073-${format("%04d", index)}",
    "int-a": cidrhost(internal_prefix, index + addr_range_offset)
    "ext-1": cidrhost(external_prefix, index + addr_range_offset)
  }])},
  "acs_config": {
    "join_mode": "auto",
    "internal_networking": {
      "internal_interfaces": [
        {
          "interface": "int-a",
          "netmask": "${cidrnetmask(internal_prefix)}",
          "ip_address_ranges": [
            {
              "high": "${cidrhost(internal_prefix, max_num_nodes + addr_range_offset -1)}",
              "low": "${cidrhost(internal_prefix, addr_range_offset)}"
            }
          ]
        }
      ],
      "internal_mtu": 1420
    },
    "external_networking" : {
      "external_interfaces": [
        {
          "interface": "ext-1",
          "netmask": "${cidrnetmask(external_prefix)}",
          "gateway": "${external_gateway_address}",
          "ip_address_ranges": [
            {
              "high": "${cidrhost(external_prefix, max_num_nodes + addr_range_offset -1)}",
              "low": "${cidrhost(external_prefix, addr_range_offset)}"
            }
          ],
          "mtu": 1420
        }
      ],
      "dns_servers": ${dns_servers} ,
      "dns_domains": [
        "${dns_domains}"
      ],
      "internal_as_external": false,
      "smartconnect": {
        "service_addr": "${cidrhost(external_prefix, addr_range_offset - 1)}",
        "zone": "${smartconnect_zone == "" ? "${cluster_name}.internal" : smartconnect_zone}"
      }
    },
    "cluster": {
      "name": "${cluster_name}",
      "encoding": "utf-8",
      "admin_user_password": "${admin_password}",
      "cluster_owner": {
        "phone": "123-555-9999",
        "company": "Dell EMC",
        "contact": "Unikitty",
        "email": "unikitty@dell.com"
      },
      "nodes": ${jsonencode([for index in range(cluster_nodes) : {"serial_number": "SV200-930073-${format("%04d", index)}"}])},
      "l3_cache": {
        "ssd_l3_cache_default_enabled": false
      },
      "timezone": {
        "name": "${timezone}"
      },
      "password": "${root_password}",
      "cluster_name_nt4_compatibility": false
    }
  },
  "ocm_endpoint": "${ocm_endpoint}"
}
